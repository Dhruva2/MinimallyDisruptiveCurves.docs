<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/MinimallyDisruptiveCurves.docs/libs/katex/katex.min.css"> <link rel=stylesheet  href="/MinimallyDisruptiveCurves.docs/libs/highlight/github.min.css"> <link rel=stylesheet  href="/MinimallyDisruptiveCurves.docs/css/jtd.css"> <link rel=icon  href="/MinimallyDisruptiveCurves.docs/assets/favicon.ico"> <title>MinimallyDisruptiveCurves.jl: Documentation</title> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/MinimallyDisruptiveCurves.docs/" class=title > Documentation </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item active"><a href="/MinimallyDisruptiveCurves.docs/" class="menu-list-link active">Home</a> <li class="menu-list-item "><a href="/MinimallyDisruptiveCurves.docs/installation/"class="menu-list-link ">Installation</a> <li class="menu-list-item "><a href="/MinimallyDisruptiveCurves.docs/menu1/" class="menu-list-link ">How it works</a> <li class="menu-list-item "><a href="/MinimallyDisruptiveCurves.docs/sceptic/" class="menu-list-link ">A sceptic's viewpoint</a> <li class="menu-list-item "><a href="/MinimallyDisruptiveCurves.docs/menu2/" class="menu-list-link ">Examples</a> <li class="menu-list-item "><a href="/MinimallyDisruptiveCurves.docs/menu3/" class="menu-list-link ">Tips & Tricks</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="#" class=menu-list-link >Submenu</a> </ul> </ul> </div> <div class=footer > This is <em>Just the docs</em>, adapted from the <a href="https://github.com/pmarsceill/just-the-docs" target=_blank >Jekyll theme</a>. </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a id=github  href="/MinimallyDisruptiveCurves.docs//github.com/Dhruva2/MinimallyDisruptiveCurves.jl">MinimallyDisruptiveCurves.jl on GitHub</a> </div> <div class=franklin-content ><h1 id=minimallydisruptivecurvesjl ><a href="#minimallydisruptivecurvesjl">MinimallyDisruptiveCurves.jl</a></h1> <p><div class=franklin-toc ><ol><li><a href="#what_it_does_short_form">What it does &#40;short form&#41;</a><li><a href="#use_cases">Use Cases </a><li><a href="#basic_workflow">Basic workflow</a><li><a href="#features">Features</a><li><a href="#caveats">Caveats</a><li><a href="#related_literature">Related literature</a><li><a href="#citing">Citing</a><li><a href="#references">References </a></ol></div> <br/> <br/> <p style="color:black;font-size:20px;"> Because building a good model is hard</p> </p> <div class=row > <div class=container > <img class=left  src="/MinimallyDisruptiveCurves.docs/assets/physicists.png"> <div style="clear: both"></div> </div> </div> <p><br/> <br/> <p style="color:black;font-size:28px;">But extracting useful insight from a model is harder</p> <div class=row > <div class=container > <img class=left  src="/MinimallyDisruptiveCurves.docs/assets/curve_fitting.png"> <div style="clear: both"></div> </div> </div> &#40;<em>Credit: https://xkcd.com/793/ and https://xkcd.com/2048/</em>&#41; <br/></p> <h2 id=what_it_does_short_form ><a href="#what_it_does_short_form">What it does &#40;short form&#41;</a></h2> <p>At its&#39; core, only one thing: </p> <blockquote> <p>Finds functional relationships between model parameters that best preserve model behaviour.</p> </blockquote> <p> <p style = "text-align:right"> (...by solving a differential equation on the parameters) </p> <br/></p> <div class=unobtrusivebox ><strong>Schematic</strong> <br/> <br/> <div class=row > <div class=container > <img class=left  src="/MinimallyDisruptiveCurves.docs/assets/mdc_schematic.svg"> <div style="clear: both"></div> </div> </div> <em>&#40;bracketed blocks are optional. Ideal outputs could be experimental data&#41;. Choice of cost/loss function is arbitrary, as long as it&#39;s differentiable.</em></div> <p><br/> <br/> <br/> <strong>Compared to model fitting/optimisation &#40;<em>which this is not</em>&#41;</strong> <br/> <br/> <div class=row > <div class=container > <img class=left  src="/MinimallyDisruptiveCurves.docs/assets/loss_schematic.svg"> <div style="clear: both"></div> </div> </div> <br/></p> <ul> <li><p>You start with an initial set of parameters for which the model &#39;works&#39; as you want it to &#40;as quantified by a cost/loss function&#41;. You can get this from model fitting/optimisation.</p> <li><p>Each minimally disruptive curve is a continuous path in parameter space. Any point on the path is a set of parameters for which the model &#39;works&#39; &#40;nearly&#41; as well as the initial set of parameters.</p> <li><p>The job of the MD curve generator is to </p> </ul> <blockquote> <p><em>get as far away as possible from the initial parameters, while keeping the cost function as low as possible</em>.</p> </blockquote> <br/> <p><strong>A minimally disruptive curve might look like this</strong> &#40;for a three-parameter model&#41;: <div class=row > <div class=container > <img class=left  src="/MinimallyDisruptiveCurves.docs/assets/mdc_traj_schematic.svg"> <div style="clear: both"></div> </div> </div> </p> <ul> <li><p>Any point on the curve defines a set of parameters for which the model performs &#39;well&#39; &#40;as quantified by the cost function&#41;.</p> </ul> <div class=infobox ><p><strong>By the way</strong> <br/> <br/> Play around with curve specifications such as :</p> <ul> <li><p>the initial curve direction</p> <li><p>which parameters the curve can&#40;not&#41; change</p> <li><p>which parameters the curve is biased towards changing</p> <li><p>reparameterising the cost function</p> </ul> <p>... to get different minimally disruptive curves yielding different model insights.</p></div> <p><br/> <br/> <strong>Not happy with the explanation? See the following sources for more information:</strong> <br/> <br/></p> <table><tr><th align=right >Source<th align=right >Rigorous enough<th align=right >Excessively rigorous<th align=right >Excessively verbose<th align=right >Unreliable<tr><td align=right ><a href="https://ora.ox.ac.uk/objects/uuid:f58aa335-db0a-495b-8eef-1ddb363cbd19/download_file?file_format&#61;pdf&amp;safe_filename&#61;masterDoc.pdf&amp;type_of_work&#61;Thesis">My thesis, ch. 5 &#40;ch. 4 is relevant too&#41;</a><td align=right ><td align=right >x<td align=right >x<td align=right ><tr><td align=right ><span class=bibref >(<a href="#raman17">Raman et al. (2017)</a>)</span><td align=right >x<td align=right ><td align=right >x<td align=right ><tr><td align=right ><a href="/MinimallyDisruptiveCurves.docs/menu1/">How it works</a><td align=right >x<td align=right ><td align=right ><td align=right ><tr><td align=right >dvr23@cam.ac.uk<td align=right ><td align=right ><td align=right ><td align=right >x</table> <br/> <h2 id=use_cases ><a href="#use_cases">Use Cases </a></h2> <p style="color:black;font-size:18px;"> You have a mathematical model (of any flavour), and you want to answer questions like: </p> <ul> <li><p>Which model interactions could I kill without greatly affecting model behaviour?</p> <li><p>Is there a hidden approximation I could make in the model that wouldn&#39;t greatly change behaviour? </p> <li><p>Are model parameters structurally / practically identifiable from data? If not, which &#40;functions of the&#41; parameters are unidentifiable?</p> <li><p>&#40;<em>Dually</em>&#41; What spaces of parameters are &#40;approximately/exactly&#41; consistent with the data / desired behaviour?</p> <li><p>Could changes in parameter <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span> could be continuously compensated for by changes in parameters <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span> and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>? Or by <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">u</span></span></span></span>, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span></span>, and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span>? Or by any parameters at all? If so, what kind of compensatory changes?</p> </ul> <br/> <div class=infobox ><p><strong>By the way</strong> </p> <ul> <li><p>We provide <a href="/MinimallyDisruptiveCurves.docs/menu2/">Examples</a> in which MD curves answer all of the above questions </p> </ul> <p><em>&#40;on differential equation models from systems biology/neuroscience due to author prejudice. The package is model-agnostic.&#41;</em></p> <ul> <li><p>If you find any other use case, let me know&#33;</p> </ul></div> <br/> <h2 id=basic_workflow ><a href="#basic_workflow">Basic workflow</a></h2> <div class=row > <div class=container > <img class=left  src="/MinimallyDisruptiveCurves.docs/assets/intro_workflow_schematic.svg"> <div style="clear: both"></div> </div> </div> <div class=infobox ><p><strong>By the way</strong></p> <ul> <li><p>MinimallyDisruptiveCurves never interacts directly with your model. Only the cost function. So it is agnostic to the model / how you coded the model</p> <li><p>Your cost function can be anything, as long as it&#39;s differentiable. Quantify how well the model matches data, oscillates at 4Hz or does backflips. Your choice.</p> </ul></div> <p><strong>What you need</strong></p> <ol> <li><p>A julia function &#40;<em>the cost function</em>&#41; with two methods as shown:</p> </ol> <pre><code class="julia hljs"><span class=hljs-comment ># method 1</span>
<span class=hljs-keyword >function</span> cost(params)
  ... 
  <span class=hljs-keyword >return</span> cost
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># method 2</span>
<span class=hljs-keyword >function</span> cost(params, gradient_holder)
  ...
  gradient_holder[:] = ∇C(params) 
  <span class=hljs-comment ># MUTATE gradient holder. </span>
  <span class=hljs-comment ># It must provide the gradient of the cost with respect to parameters.</span>
  <span class=hljs-keyword >return</span> cost
<span class=hljs-keyword >end</span></code></pre> <ol start=2 > <li><p>An initial set of parameters, <code>p0</code>, that are <strong>locally minimal</strong> with respect to the cost function. So</p> </ol> <pre><code class="julia hljs">grad_holder = rand(size(p0))
c0 = cost(p0, grad_holder)
<span class=hljs-comment ># now grad_holder ≈ zeros(size(grad_holder))</span></code></pre> <ul> <li><p><em>How do you get such a <code>p0</code>?</em> By fitting the model to the cost function. In Julia, you can choose from a <a href="https://www.juliaopt.org/packages/">variety of optimisation packages</a>. I use Optim.jl in the examples.</p> </ul> <p><br/> <br/></p> <div class=infobox ><p><strong>By the way</strong></p> <p><em>Calculating the gradients of cost functions of complicated models is hard right?</em> </p> <p>Not these days&#33; Automatic differentiation of near-arbitrary code is one of the big advantages of Julia.</p> <ul> <li><p>The two-method specification of the cost function above is shared with most julia optimisation packages &#40;e.g. Optim.jl&#41;. So you can incorporate these seamlessly in a MinimallyDisruptiveCurves.jl workflow, for creating/pre-minimising cost functions. </p> <li><p>DiffEqParamEstim.jl makes cost functions of the required form for differential equation-based models.</p> <li><p>Otherwise, Zygote.jl and ForwardDiff.jl can collectively take the gradient of pretty much any differentiable Julia code between them. </p> <li><p>If all else fails, MinimallyDisruptiveCurves.jl provides a function: <code>make_fd_differentiable&#40;cost&#41;</code>, that spits out a cost function of the required form, with a finite-difference step to calculate the gradient. <em>But using finite diffence differentiation with Julia is like using a Ferrari to do the school run.</em></p> </ul></div> <p><br/> <br/></p> <h2 id=features ><a href="#features">Features</a></h2> <p><strong>Computational complexity</strong></p> <ul> <li><p>Since this package is not based on sampling parameter space, it doesn&#39;t suffer from the curse of dimensionality in models with many parameters.</p> <li><p>Generating a minimally disruptive curve usually requires somewhere between a few hundred, and a few thousand, evaluations of your cost function &#40;and its gradient&#41;. That&#39;s the major computational cost</p> </ul> <h2 id=caveats ><a href="#caveats">Caveats</a></h2> <ul> <li><p><strong>Your cost function needs to be differentiable.</strong> </p> </ul> <p>Your cost function is a mathematical expression of what you want your model to do. A little bit of ingenuity can usually find differentiable cost functions that successfully express what you want the model to do. Otherwise, switch your brain off and take your cost as the L2 deviation from some ideal model output. </p> <ul> <li><p><strong>MinimallyDisruptiveCurves.jl generates 1d functional relationships &#40;i.e.: <em>curves</em>&#41;</strong></p> </ul> <p>There may be higher-dimensional functional relationships &#40;i.e. <em>surfaces</em> or <em>hyper-surfaces</em>&#41; in parameter space, over which model behaviour is approximately preserved. You won&#39;t automatically find these using MinimallyDisruptiveCurves.jl. But by evolving multiple curves with different initial conditions / at different points in parameter space, you could get somewhere. </p> <h2 id=related_literature ><a href="#related_literature">Related literature</a></h2> <p>Structural identifiability, practical unidentifiability Profile likelihood without gradients. Mbam. </p> <h2 id=citing ><a href="#citing">Citing</a></h2> <p><strong>The algorithm</strong>: &#40;minus a few tweaks&#41;</p> <pre><code class="julia hljs"><span class=hljs-meta >@article</span>{raman2017delineating,
  title={Delineating parameter unidentifiabilities <span class=hljs-keyword >in</span> complex models},
  author={Raman, Dhruva V and Anderson, James and Papachristodoulou, Antonis},
  journal={Physical Review E},
  volume={<span class=hljs-number >95</span>},
  number={<span class=hljs-number >3</span>},
  pages={<span class=hljs-number >032314</span>},
  year={<span class=hljs-number >2017</span>},
  publisher={APS}
}</code></pre> <p><strong>The software</strong>: as yet unpublished, keep your eye on this&#33;</p> <h2 id=references ><a href="#references">References </a></h2> <ul> <li><p><a id=raman17  class=anchor ></a><strong>Raman</strong>, <strong>Anderson</strong> and <strong>Papachristodoulou</strong>, <a href="https://journals.aps.org/pre/abstract/10.1103/PhysRevE.95.032314">Delineating parameter unidentifiabilities in complex models.</a>, Physical Review E 95.3 &#40;2017&#41;.</p> </ul> <div class=page-foot > <div class=copyright > &copy; Dhruva Venkita Raman. Last modified: August 04, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>. </div> </div> </div> </div> </div> </div> <!-- end of class page-wrap-->